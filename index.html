<!DOCTYPE html>
<html>
<head>
  <title>Todo List</title>
  <style>
    body {
      font-family: Arial, sans-serif;
    }

    .todo-item {
      margin-bottom: 5px;
    }

    .todo-item input[type="checkbox"] {
      margin-right: 5px;
    }
  </style>
</head>
<body>
  <h1>Todo List</h1>

  <input type="text" id="taskInput" placeholder="Digite uma nova tarefa">
  <button onclick="addTask()">Adicionar</button>

  <div id="taskList"></div>

  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.7.0/firebase-firestore.js"></script>
  <script>
    // Configurar as informações do seu projeto Firebase
    const firebaseConfig = {
      apiKey: 'SUA_API_KEY',
      authDomain: 'SEU_AUTH_DOMAIN',
      projectId: 'SEU_PROJECT_ID',
      storageBucket: 'SEU_STORAGE_BUCKET',
      messagingSenderId: 'SEU_SENDER_ID',
      appId: 'SEU_APP_ID'
    };

    // Inicializar o Firebase
    firebase.initializeApp(firebaseConfig);

    // Referenciar a coleção 'tasks' no Firestore
    const db = firebase.firestore();
    const tasksRef = db.collection('tasks');

    // Função para adicionar uma nova tarefa
    function addTask() {
      const taskInput = document.getElementById('taskInput');
      const task = taskInput.value.trim();

      if (task !== '') {
        // Salvar a tarefa no Firestore
        tasksRef.add({ description: task })
          .then(() => {
            taskInput.value = '';
          })
          .catch(error => {
            console.error('Erro ao adicionar a tarefa:', error);
          });
      }
    }

    // Função para excluir uma tarefa
    function deleteTask(id) {
      // Excluir a tarefa do Firestore
      tasksRef.doc(id).delete()
        .catch(error => {
          console.error('Erro ao excluir a tarefa:', error);
        });
    }

    // Função para renderizar as tarefas na página
    function renderTasks() {
      const taskList = document.getElementById('taskList');
      taskList.innerHTML = '';

      // Obter as tarefas do Firestore
      tasksRef.get()
        .then(querySnapshot => {
          querySnapshot.forEach(doc => {
            const task = doc.data();
            const id = doc.id;

            const todoItem = document.createElement('div');
            todoItem.className = 'todo-item';

            const checkbox = document.createElement('input');
            checkbox.type = 'checkbox';
            checkbox.addEventListener('change', () => {
              toggleTaskCompleted(id);
            });

            const taskText = document.createElement('span');
            taskText.textContent = task.description;

            const deleteButton = document.createElement('button');
            deleteButton.textContent = 'Excluir';
            deleteButton.addEventListener('click', () => {
              deleteTask(id);
            });

            todoItem.appendChild(checkbox);
            todoItem.appendChild(taskText);
            todoItem.appendChild(deleteButton);

            taskList.appendChild(todoItem);
          });
        })
        .catch(error => {
          console.error('Erro ao obter as tarefas:', error);
        });
    }

    // Função para marcar ou desmarcar uma tarefa como concluída
    function toggleTaskCompleted(id) {
      // Adicione aqui a lógica para marcar ou desmarcar a tarefa como concluída no Firestore
      // Exemplo: tasksRef.doc(id).update({ completed: newValue });
    }

    // Renderizar as tarefas ao carregar a página
    renderTasks();
  </script>
</body>
</html>
